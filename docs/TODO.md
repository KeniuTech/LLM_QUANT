# 项目工作总览

> 汇总全局工作项，统一标记完成情况，避免重复维护；如需细化请在同一条目下更新备注。状态含义：✅ 已完成｜🔄 进行中｜⏳ 待启动。

## 数据与特征

| 工作项 | 状态 | 说明 |
| --- | --- | --- |
| 因子计算流水线 | ✅ | 新增 `scripts/run_factor_pipeline.py` 支撑增量/干跑模式，并提供 `factor_audit` 审计报表。 |
| DataBroker 弹性 | ✅ | 集成 `evaluate_data_quality()` 评分与分级汇总，可直接输出阻塞项。 |
| 因子库扩展 | ✅ | 补齐因子权重优化与组合回测评估，支持组合度量与组件表现。 |
| 新闻数据接入 | ✅ | 实体识别与时效热度打分落地，并配套单元测试验证字段持久化。 |
| 数据完整性体系 | ✅ | 新增 `scripts/run_data_integrity.py` 自动巡检，异常触发告警并可联动补数。 |
| 选股使用预计算因子 | ✅ | 回测引擎统一加载 `factors.*` 快照，默认不再重复计算核心因子。 |
| 因子公式复核 | ✅ | 提供 `factor_audit` 工具与文档，支持公式复核与漂移检测。 |

## 决策优化与强化学习

| 工作项 | 状态 | 说明 |
| --- | --- | --- |
| DecisionEnv 扩展 | ✅ | Episode 指标现已包含 Sharpe/Calmar，奖励函数集成风险惩罚并覆写提示版本、function 策略等部门控制。 |
| 强化学习基线 | ✅ | PPO/SAC 等连续动作算法已接入并形成实验基线。 |
| 奖励与评估体系 | ✅ | 决策环境奖励结合风险/Turnover/Sharpe-Calmar，并同步输出成交与资金曲线指标。 |
| 实时持仓链路 | ✅ | 新增 `app/utils/portfolio_sync.py`，回测与实时持仓、成交数据统一写入 `portfolio_*` 表供离线调参与监控共享。 |
| 全局参数搜索 | ✅ | epsilon-greedy + 高斯过程贝叶斯优化 + BOHB 继任者已落地，输出全量调参与指标。 |

## 多智能体协同与 LLM

| 工作项 | 状态 | 说明 |
| --- | --- | --- |
| Provider 与 function 架构 | ✅ | Provider 管理、function-calling 降级与重试策略已收敛。 |
| 提示模板治理 | ✅ | LLM 设置提供模板版本治理、元数据维护与调用监控，待补充成本/效果分析。 |
| 部门遥测可视化 | ✅ | 设置页已支持部门/全局遥测筛选、导出与动态限额调节。 |
| 多轮逻辑博弈框架 | ✅ | 主持 briefing、预测对齐、风险复核与冲突回合均已串联上线。 |
| LLM 稳定性提升 | ✅ | Provider 级限速、响应缓存与成本守卫协同生效，支撑平滑降级策略。 |

## UI 与监控

| 工作项 | 状态 | 说明 |
| --- | --- | --- |
| 一键重评估入口 | ✅ | 今日计划页提供批量/全量重评估入口，待收集反馈再做优化。 |
| 回测实验对比 | ✅ | 会话实验保存、曲线/指标对比与日期过滤均已落地，后续按需扩充提示参数。 |
| 实时指标面板 | ✅ | Streamlit 监控页已具备核心实时指标。 |
| 异常日志钻取 | ✅ | 日志视图支持时间/级别/阶段筛选、关键词搜索及双日期历史对比导出。 |
| 仅监控模式 | ✅ | 今日计划页新增监控模式一键重评估，预览策略而不写入数据库。 |
| 风险预警面板 | ✅ | 风险预警能力已落地，仍需持续扩充指标。 |

## 风险控制与执行

| 工作项 | 状态 | 说明 |
| --- | --- | --- |
| 风险代理决策闭环 | ✅ | `risk_round` 支持按场景回写 `risk_assessment`、触发人手/自动兜底策略，并已接入决策追踪报表。 |
| 风险事件持久化 | ✅ | `risk_round` 事件现已批量写入 `bt_risk_events`，附带风险状态/元数据并在回测面板支持 Drill-down。 |
| 实时告警接入 | ✅ | 引入告警分发器支持配置化 webhook 通道，风险阻断/复核即时推送至外部渠道。 |
| 风险场景测试 | ✅ | 新增停牌、仓位超限、黑名单等集成测试覆盖，验证风险闭环执行。 |

## 测试与质量保障

| 工作项 | 状态 | 说明 |
| --- | --- | --- |
| 单元/集成测试覆盖 | ⏳ | 补充部门上下文、LLM 调用、回测指标等核心路径测试。 |
| 决策流程回归集 | ⏳ | 建立提示模板调整后的回归用例，确保行为可复现。 |
| 数据质量验证 | 🔄 | 自检页面新增候选/策略/持仓/新闻质量检查，后续补自动化管线。 |
| 教程与示例 | ⏳ | 编写 Notebook 或 End-to-End 教程覆盖“数据→回测→调参→评估”。 |
| 日志收集机制 | ⏳ | 完善日志聚合与查询工具，支撑问题定位。 |

## 文档与知识库

| 工作项 | 状态 | 说明 |
| --- | --- | --- |
| README 对外化 | 🔄 | 重写支持快速了解定位、功能、部署方式（本轮更新进行中）。 |
| 原理文档分册 | 🔄 | 多智能体、强化学习调参、风险控制等原理文档按专题拆分。 |
| 业务流程手册 | ⏳ | 梳理投研/交易流程，评估代码实现是否吻合业务需求。 |
| 文档同步机制 | ⏳ | 建立功能迭代后的文档更新流程与责任人。 |

## 架构与代码整洁

| 工作项 | 状态 | 说明 |
| --- | --- | --- |
| 全量代码审查 | 🔄 | 已制定 `docs/architecture/code_review_checklist.md`，按 checklist 推进模块审查。 |
| TODO 标记治理 | 🔄 | 新增 `scripts/todo_report.py` 支撑定期扫描，待梳理遗留项目。 |
| 业务逻辑体检 | ✅ | 梳理业务链路完成，已拆分采集/覆盖/决策模块；详见 docs/architecture/business_logic_healthcheck.md。 |
